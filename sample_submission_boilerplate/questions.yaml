task: >
  You are given a precomputed 10x Genomics Visium filtered matrix in HDF5 format
  (sample_submission_boilerplate/data/filtered_feature_bc_matrix.h5) from a colorectal
  cancer tissue section. Using standard single-cell/spatial transcriptomics tools
  (e.g., Scanpy or Seurat), compute the following. Each question corresponds to a
  different analysis stage: gene summary → normalization/PCA → clustering → differential
  expression → marker enrichment.

questions:
  - id: q1
    stage: gene_summary
    text: "How many unique gene features are present in the H5 (after making gene names unique; i.e., n_vars)?"
    answer_type: integer_exact

  - id: q2
    stage: norm_pca
    text: "After library-size normalization (target_sum=1e4), log1p, HVG selection (flavor='seurat'), scaling, and PCA, how many PCs are needed to explain ≥80% of the variance (smallest integer meeting the threshold)?"
    answer_type: integer_exact

  - id: q3
    stage: clustering
    text: "Using the PCA embeddings (use n_pcs from Q2), build a 15-NN graph (euclidean) and run Leiden clustering at resolution 0.4. How many clusters are detected?"
    answer_type: integer_exact

  - id: q4
    stage: de_markers
    text: "For the EPCAM-high cluster (the cluster with highest mean EPCAM expression), list the top 3 marker genes by `rank_genes_groups` (method='wilcoxon', only_positive=True), in descending order of score. Report gene symbols exactly."
    answer_type: ordered_list

  - id: q5
    stage: enrichment
    text: "Which CMS-like epithelial marker set is most enriched in the EPCAM-high cluster (one of {CMS1_like, CMS2_like, CMS3_like, CMS4_like})?"
    answer_type: string_exact
    allowed_values: [CMS1_like, CMS2_like, CMS3_like, CMS4_like]
